(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1855:(e,s,n)=>{Promise.resolve().then(n.bind(n,5956))},5956:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>E});var a=n(5155),r=n(2115),l=n(9708),t=n(2085),i=n(2596),d=n(9688);function o(){for(var e=arguments.length,s=Array(e),n=0;n<e;n++)s[n]=arguments[n];return(0,d.QP)((0,i.$)(s))}let c=(0,t.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),m=r.forwardRef((e,s)=>{let{className:n,variant:r,size:t,asChild:i=!1,...d}=e,m=i?l.DX:"button";return(0,a.jsx)(m,{className:o(c({variant:r,size:t,className:n})),ref:s,...d})});m.displayName="Button";let u=r.forwardRef((e,s)=>{let{className:n,...r}=e;return(0,a.jsx)("div",{ref:s,className:o("rounded-lg border bg-card text-card-foreground shadow-sm",n),...r})});u.displayName="Card";let x=r.forwardRef((e,s)=>{let{className:n,...r}=e;return(0,a.jsx)("div",{ref:s,className:o("flex flex-col space-y-1.5 p-6",n),...r})});x.displayName="CardHeader";let f=r.forwardRef((e,s)=>{let{className:n,...r}=e;return(0,a.jsx)("div",{ref:s,className:o("text-2xl font-semibold leading-none tracking-tight",n),...r})});f.displayName="CardTitle";let p=r.forwardRef((e,s)=>{let{className:n,...r}=e;return(0,a.jsx)("div",{ref:s,className:o("text-sm text-muted-foreground",n),...r})});p.displayName="CardDescription";let g=r.forwardRef((e,s)=>{let{className:n,...r}=e;return(0,a.jsx)("div",{ref:s,className:o("p-6 pt-0",n),...r})});g.displayName="CardContent",r.forwardRef((e,s)=>{let{className:n,...r}=e;return(0,a.jsx)("div",{ref:s,className:o("flex items-center p-6 pt-0",n),...r})}).displayName="CardFooter";var h=n(968);let v=(0,t.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),j=r.forwardRef((e,s)=>{let{className:n,...r}=e;return(0,a.jsx)(h.b,{ref:s,className:o(v(),n),...r})});j.displayName=h.b.displayName;let b=r.forwardRef((e,s)=>{let{className:n,...r}=e;return(0,a.jsx)("textarea",{className:o("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:s,...r})});b.displayName="Textarea";let N=r.forwardRef((e,s)=>{let{className:n,type:r,...l}=e;return(0,a.jsx)("input",{type:r,className:o("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:s,...l})});N.displayName="Input";var y=n(8181);let w=y.bL,k=r.forwardRef((e,s)=>{let{className:n,...r}=e;return(0,a.jsx)(y.B8,{ref:s,className:o("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...r})});k.displayName=y.B8.displayName;let S=r.forwardRef((e,s)=>{let{className:n,...r}=e;return(0,a.jsx)(y.l9,{ref:s,className:o("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...r})});S.displayName=y.l9.displayName;let C=r.forwardRef((e,s)=>{let{className:n,...r}=e;return(0,a.jsx)(y.UC,{ref:s,className:o("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...r})});C.displayName=y.UC.displayName;var _=n(7489);let R=r.forwardRef((e,s)=>{let{className:n,orientation:r="horizontal",decorative:l=!0,...t}=e;return(0,a.jsx)(_.b,{ref:s,decorative:l,orientation:r,className:o("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",n),...t})});R.displayName=_.b.displayName;var z=n(690),F=n(3837),P=n(1284);function O(e){var s,n,r,l,t,i,d,o;let{scene:c}=e,m=null!==(i=null===(n=c.level)||void 0===n?void 0:null===(s=n.boxes)||void 0===s?void 0:s.length)&&void 0!==i?i:0,x=null!==(d=null===(r=c.enemies)||void 0===r?void 0:r.length)&&void 0!==d?d:0,f=null!==(o=null===(l=c.weapons)||void 0===l?void 0:l.length)&&void 0!==o?o:0,p=c.render.clearColor;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(u,{children:(0,a.jsx)(g,{className:"p-4 text-sm",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-muted-foreground",children:"Уровень"}),(0,a.jsx)("div",{className:"font-medium",children:(null===(t=c.meta)||void 0===t?void 0:t.name)||"(без имени)"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-muted-foreground",children:"Структура"}),(0,a.jsxs)("div",{className:"font-medium",children:[m," блоков"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-muted-foreground",children:"Враги"}),(0,a.jsx)("div",{className:"font-medium",children:x})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-muted-foreground",children:"Оружие"}),(0,a.jsx)("div",{className:"font-medium",children:f})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("div",{className:"text-muted-foreground",children:"Фон"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"h-5 w-5 rounded border",style:{backgroundColor:function(e){let[s,n,a,r]=e;return"rgba(".concat(Math.round(255*s),", ").concat(Math.round(255*n),", ").concat(Math.round(255*a),", ").concat(r,")")}(p)},"aria-label":"clear color",title:"rgba(".concat(p.map(e=>Math.round(255*e)).join(", "),")")}),(0,a.jsx)("span",{className:"text-xs",children:"[".concat(p.map(e=>e.toFixed(2)).join(", "),"]")})]})]})]})})}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Подсказка: скачай JSON и положи в assets/levels движка. В MVP‑версии движок строит уровень из прямоугольных блоков (оси X/Z), использует FPS‑камеру и хитскан‑оружие."})]})}let A='\nKengaFPSSceneV0\n{\n  "meta": { "schema": "KengaFPSSceneV0", "version": "0.1.0", "name": "level_name" },\n  "render": { "clearColor": [r,g,b,a] },\n  "player": { "spawn": [x,y,z], "yaw": 0.0, "pitch": 0.0, "move": { "speed": 4.5, "run": 7.5 } },\n  "weapons": [\n    { "id": "rifle", "kind": "hitscan", "damage": 12.0, "rate": 6.0, "spread": 1.5 }\n  ],\n  "level": {\n    "boxes": [\n      { "pos": [x,y,z], "size": [sx,sy,sz], "rotY": 0.0, "color": [r,g,b] }\n    ]\n  },\n  "enemies": [\n    { "kind": "grunt", "spawn": [x,y,z], "patrol": [[x,y,z],[x,y,z]] }\n  ],\n  "triggers": [\n    { "pos": [x,y,z], "size": [sx,sy,sz], "onEnter": "spawn_wave:grunt:3" }\n  ],\n  "goals": { "type": "extract", "point": [x,y,z] }\n}\n'.trim(),D='Сделай уровень шутера от первого лица:\n- Сеттинг: научно‑фантастический бункер (Doom x Destiny), красная тревога, мерцающее освещение.\n- План: стартовая комната -> узкий коридор -> арена с колоннами -> лифт к эвакуации.\n- Игрок: спавнится в стартовой, скорость средняя, есть винтовка (хитскан), урон умеренный.\n- Враги: 6–8 "grunt", патрулируют коридоры и встречают на арене.';function E(){let[e,s]=(0,r.useState)(D),[n,l]=(0,r.useState)("Doom x Destiny, мрачные коридоры мегаструктуры"),[t,i]=(0,r.useState)("level_fps_m1"),[d,o]=(0,r.useState)(!1),[c,h]=(0,r.useState)(null),[v,y]=(0,r.useState)(null),_=(0,r.useMemo)(()=>e.trim().length>10,[e]);async function E(){o(!0),h(null);try{let s=await fetch("/api/generate-scene",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({kind:"fps",prompt:e,style:n,levelName:t,maxBoxes:128,maxEnemies:16})});if(!s.ok){let e=await s.text();throw Error("API error: ".concat(s.status," ").concat(e))}let a=await s.json();y(a.scene)}catch(e){var s;h(null!==(s=null==e?void 0:e.message)&&void 0!==s?s:"Неизвестная ошибка")}finally{o(!1)}}return(0,a.jsxs)("main",{className:"mx-auto max-w-6xl p-6 space-y-6",children:[(0,a.jsxs)("header",{className:"flex flex-col gap-2",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold",children:"KengaAI Studio — No‑Code генератор уровней"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Опиши игру словами — агент соберёт JSON‑уровень для KengaAI Engine. Поддержка: шутер от первого лица (MVP)."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(u,{children:[(0,a.jsxs)(x,{children:[(0,a.jsx)(f,{children:"Описание уровня"}),(0,a.jsx)(p,{children:"Жанр: FPS. Агент создаст сцену по схеме KengaFPSScene."})]}),(0,a.jsxs)(g,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(j,{htmlFor:"style",children:"Художественный стиль"}),(0,a.jsx)(N,{id:"style",placeholder:"Напр.: Doom x Destiny, sci‑fi, неон",value:n,onChange:e=>l(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(j,{htmlFor:"levelName",children:"Имя уровня (файл)"}),(0,a.jsx)(N,{id:"levelName",placeholder:"level_fps_m1",value:t,onChange:e=>i(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(j,{htmlFor:"prompt",children:"ТЗ для агента"}),(0,a.jsx)(b,{id:"prompt",className:"min-h-[200px]",value:e,onChange:e=>s(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)(m,{disabled:!_||d,onClick:E,className:"gap-2",children:[(0,a.jsx)(z.A,{className:"h-4 w-4"}),d?"Генерация…":"Сгенерировать уровень"]}),(0,a.jsxs)(m,{variant:"secondary",disabled:!v,onClick:function(){v&&function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kenga_scene.json",n=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(n),r=document.createElement("a");r.href=a,r.download=s,document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(a)}(v,"".concat(t||"kenga_fps_level",".json"))},className:"gap-2",children:[(0,a.jsx)(F.A,{className:"h-4 w-4"}),"Скачать JSON"]})]}),c&&(0,a.jsxs)("p",{className:"text-sm text-red-600",children:["Ошибка: ",c]})]})]}),(0,a.jsxs)(u,{children:[(0,a.jsxs)(x,{children:[(0,a.jsx)(f,{children:"Предпросмотр"}),(0,a.jsx)(p,{children:"Краткая сводка по сгенерированной сцене"})]}),(0,a.jsx)(g,{children:v?(0,a.jsx)(O,{scene:v}):(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Нет данных. Нажми “Сгенерировать уровень”, чтобы получить сцену."})})]})]}),(0,a.jsxs)(u,{children:[(0,a.jsxs)(x,{children:[(0,a.jsxs)(f,{className:"flex items-center gap-2",children:[(0,a.jsx)(P.A,{className:"h-4 w-4"}),"Как запустить в движке"]}),(0,a.jsxs)(p,{children:["Скачай JSON и положи его в ",(0,a.jsx)("code",{className:"font-mono",children:"assets/levels/"})," движка."]})]}),(0,a.jsxs)(g,{className:"space-y-4",children:[(0,a.jsxs)("ol",{className:"list-decimal pl-4 space-y-1 text-sm",children:[(0,a.jsxs)("li",{children:["Скачай ",(0,a.jsx)("strong",{children:(t||"kenga_fps_level")+".json"})," и помести в ",(0,a.jsx)("code",{className:"font-mono",children:"assets/levels/"})," репозитория KengaAI Engine."]}),(0,a.jsxs)("li",{children:["Запусти демо FPS загрузчика (в движке): ",(0,a.jsxs)("code",{className:"font-mono",children:["cargo run -p kengaai-demo-fps -- assets/levels/",(t||"kenga_fps_level")+".json"]})]}),(0,a.jsx)("li",{children:"Играй: WASD + мышь, ЛКМ — выстрел. (MVP — один уровень, базовые враги и оружие)."})]}),(0,a.jsx)(R,{}),(0,a.jsxs)(w,{defaultValue:"schema",children:[(0,a.jsxs)(k,{children:[(0,a.jsx)(S,{value:"schema",children:"Схема KengaFPSScene"}),(0,a.jsx)(S,{value:"prompt",children:"Пример запроса"})]}),(0,a.jsx)(C,{value:"schema",children:(0,a.jsx)("pre",{className:"text-xs overflow-auto bg-muted p-3 rounded-md",children:A})}),(0,a.jsx)(C,{value:"prompt",children:(0,a.jsx)("pre",{className:"text-xs overflow-auto bg-muted p-3 rounded-md",children:D})})]})]})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[124,441,684,358],()=>s(1855)),_N_E=e.O()}]);